<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <title>El Quijote xd</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <button id="order"><a href="order.html"><i class="fa-duotone fa-solid fa-list-ol"></i></a></button>
  <h2 id="category-title"></h2> <!-- Título dinámico aquí -->

  <!-- Slider main container -->
  <div class="swiper">
    <!-- Additional required wrapper -->
    <div class="swiper-wrapper">
      <!-- Plato 1 entrantes-->
      <div class="swiper-slide" data-category="group1">
        <div class="content" data-content="five">

      

          <video id="slider" autoplay muted loop playsinline>
            <source src="entrante1.mp4" type="video/mp4">
          </video>
        </div>
        <div class="dish-info" id="dish1">
          <button id="add" data-dish-name="Alitas en salsa"
            onclick="toggleOrder(this, 'Alitas en salsa', '8.50€<br>10.50 con salsa', 'entrante1foto.png')">
            <i class="fa-solid fa-circle-plus"></i>
          </button>
          <h3>Alitas en salsa</h3>
          <p>8.50€<br>10€ con salsa</p>
          <button id="verMas1" onclick="toggleAllergens('allergens1','verMas1','verMenos1')">Ver más
            <i class="fa-duotone fa-solid fa-angle-down"></i>
          </button>
          <div class="allergens" id="allergens1" style="display: none;">
            <p>Alergenos:</p>
            <p>Lima</p>
          </div>
          <button id="verMenos1" onclick="toggleAllergens('allergens1', 'verMas1', 'verMenos1')"
            style="display:none;">Ver menos
            <i class="fa-sharp-duotone fa-solid fa-angle-up"></i>
          </button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group1">
        <video id="slider" autoplay muted loop playsinline>
          <source src="entrante2.mp4" type="video/mp4">
        </video>

        <div class="dish-info" id="dish8">
          <button id="add" data-dish-name="Variedad de embutidos"
            onclick="toggleOrder(this, 'Variedad de embutidos', '7.50€ - 2 personas<br>14€ - 4 personas', 'entrante2foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Variedad de embutidos</h3>
          <p>Variedad de embutidos', '7.50€ - 2 personas<br>14€ - 4 personas</p>
          <button id="verMas8" onclick="toggleAllergens('allergens8','verMas8','verMenos8')">Ver más</button>
          <div class="allergens" id="allergens8" style="display: none;">
            <p>Alergenos:</p>
            <p>Cacahuete,lactosa,jamón...etc</p>
          </div>
          <button id="verMenos8" onclick="toggleAllergens('allergens8','verMas8','verMenos8')" style="display:none;">Ver
            menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group1">
        <video id="slider" autoplay muted loop playsinline>
          <source src="entrante3.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish9">
          <button id="add" data-dish-name="Croquetas cremosas"
            onclick="toggleOrder(this, 'Croquetas cremosas', '6€ - 6 unidades', 'entrante3foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Croquetas cremosas</h3>
          <p>6€ - 6 unidades</p>
          <button id="verMas9" onclick="toggleAllergens('allergens9','verMas9','verMenos9')">Ver más</button>
          <div class="allergens" id="allergens9" style="display: none;">
            <p>Alergenos:</p>
            <p>Lactosa, jamón...</p>
          </div>
          <button id="verMenos9" onclick="toggleAllergens('allergens9','verMas9','verMenos9')" style="display:none;">Ver
            menos ⮟</button>
        </div>
      </div>
      <!-- Slide 2 -->
      <div class="swiper-slide" data-category="group2">
        <video id="slider" autoplay muted loop playsinline>
          <source src="macarrones1.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish2">
          <button id="add" data-dish-name="Macarrones con carne picada y judías"
            onclick="toggleOrder(this, 'Macarrones con carne picada y judías', '500 g de carne picada y judías 9.50€', 'macarrones1foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Macarrones con carne picada y judías</h3>
          <p>500 g de carne picada y judías 9.50€</p>
          <button id="verMas2" onclick="toggleAllergens('allergens2','verMas2','verMenos2')">Ver más</button>
          <div class="allergens" id="allergens2" style="display: none;">
            <p>Alergenos:</p>
            <p>Gluten</p>
          </div>
          <button id="verMenos2" onclick="toggleAllergens('allergens2', 'verMas2', 'verMenos2')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>
      <!-- Slide 3 -->

      <div class="swiper-slide" data-category="group2">
        <video id="slider" autoplay muted loop playsinline>
          <source src="macarrones2.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish3">
          <button id="add" data-dish-name="Rigatoni con tomate"
            onclick="toggleOrder(this, 'Rigatoni con tomate', '8.50€\nPasta con salsa del chef', 'macarrones2foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Rigatoni con tomate</h3>
          <p>Rigatoni con tomate', '8.50€\nPasta con salsa del chef</p>
          <button id="verMas3" onclick="toggleAllergens('allergens3','verMas3','verMenos3')">Ver más</button>
          <div class="allergens" id="allergens3" style="display: none;">
            <p>Alergenos:</p>
            <p>Perejil...etc</p>
          </div>
          <button id="verMenos3" onclick="toggleAllergens('allergens3', 'verMas3', 'verMenos3')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group2">
        <video id="slider" autoplay muted loop playsinline>
          <source src="macarrones3.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish4">
          <button id="add" data-dish-name="Macarrones con bacon"
            onclick="toggleOrder(this, 'Macarrones con bacon', '8.50€', 'macarrones3foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Macarrones con bacon</h3>
          <p>8.50€</p>
          <button id="verMas4" onclick="toggleAllergens('allergens4','verMas4','verMenos4')">Ver más</button>
          <div class="allergens" id="allergens4" style="display: none;">
            <p>Alergenos:</p>
            <p>Bacon...etc</p>
          </div>
          <button id="verMenos4" onclick="toggleAllergens('allergens4', 'verMas4', 'verMenos4')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>


      <div class="swiper-slide" data-category="group3">
        <video id="slider" autoplay muted loop playsinline>
          <source src="fish1.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish5">
          <button id="add" data-dish-name="Dorada a la plancha"
            onclick="toggleOrder(this, 'Dorada a la plancha', '10.50€', 'fish1foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Dorada a la plancha</h3>
          <p>10.50€</p>
          <button id="verMas5" onclick="toggleAllergens('allergens5','verMas5','verMenos5')">Ver más</button>
          <div class="allergens" id="allergens5" style="display: none;">
            <p>Alergenos:</p>
            <p>Dorada...etc</p>
          </div>
          <button id="verMenos5" onclick="toggleAllergens('allergens5', 'verMas5', 'verMenos5')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group3">
        <video id="slider" autoplay muted loop playsinline>
          <source src="fish2.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish6">
          <button id="add" data-dish-name="Trucha con picadillo"
            onclick="toggleOrder(this, 'Trucha con picadillo', '15.50€', 'fish2foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Trucha con picadillo</h3>
          <p>15.50€</p>
          <button id="verMas6" onclick="toggleAllergens('allergens6','verMas6','verMenos6')">Ver más</button>
          <div class="allergens" id="allergens6" style="display: none;">
            <p>Alergenos:</p>
            <p>Trucha...etc</p>
          </div>
          <button id="verMenos6" onclick="toggleAllergens('allergens6','verMas6','verMenos6')" style="display:none;">Ver
            menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group3">
        <video id="slider" autoplay muted loop playsinline>
          <source src="fish3.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish7">
          <button id="add" data-dish-name="Pescado a la parrilla"
            onclick="toggleOrder(this, 'Pescado a la parrilla', '13.50€', 'fish3foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Pescado a la parrilla</h3>
          <p>13.50€</p>
          <button id="verMas7" onclick="toggleAllergens('allergens7','verMas7','verMenos7')">Ver más</button>
          <div class="allergens" id="allergens7" style="display: none;">
            <p>Alergenos:</p>
            <p>Pescado...etc</p>
          </div>
          <button id="verMenos7" onclick="toggleAllergens('allergens7','verMas7','verMenos7')" style="display:none;">Ver
            menos ⮟</button>
        </div>
      </div>


      <!-- carnes -->
      <div class="swiper-slide" data-category="group4">
        <video id="slider" autoplay muted loop playsinline>
          <source src="carne1.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish10">
          <button id="add" data-dish-name="Solomillo de cerdo"
            onclick="toggleOrder(this, 'Solomillo de cerdo', '12.50€', 'carne1foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Solomillo de cerdo</h3>
          <p>12.50€</p>
          <button id="verMas10" onclick="toggleAllergens('allergens10','verMas10','verMenos10')">Ver más</button>
          <div class="allergens" id="allergens10" style="display: none;">
            <p>Alergenos:</p>
            <p>Cerdo...etc</p>
          </div>
          <button id="verMenos10" onclick="toggleAllergens('allergens10','verMas10','verMenos10')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group4">
        <video id="slider" autoplay muted loop playsinline>
          <source src="carne2.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish11">
          <button id="add" data-dish-name="Pollo a la brasa"
            onclick="toggleOrder(this, 'Pollo a la brasa', '11.50€<br> Acompañado de brócoli y arroz', 'carne2foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Pollo a la brasa</h3>
          <p>11.50€<br> Acompañado de brócoli y arroz</p>
          <button id="verMas11" onclick="toggleAllergens('allergens11','verMas11','verMenos11')">Ver más</button>
          <div class="allergens" id="allergens11" style="display: none;">
            <p>Alergenos:</p>
            <p>Pollo...etc</p>
          </div>
          <button id="verMenos11" onclick="toggleAllergens('allergens11','verMas11','verMenos11')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group4">
        <video id="slider" autoplay muted loop playsinline>
          <source src="carne3.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish12">
          <button id="add" data-dish-name="Entrecot con salsa"
            onclick="toggleOrder(this, 'Entrecot con salsa', '14.50€<br> Acompañado de ensalada', 'carne3foto.png')"><i
              class="fa-solid fa-circle-plus"></i></button>

          <h3>Entrecot con salsa</h3>
          <p>14.50€<br> Acompañado de ensalada</p>
          <button id="verMas12" onclick="toggleAllergens('allergens12','verMas12','verMenos12')">Ver más</button>
          <div class="allergens" id="allergens12" style="display: none;">
            <p>Alergenos:</p>
            <p>Salsa...etc</p>
          </div>
          <button id="verMenos12" onclick="toggleAllergens('allergens12','verMas12','verMenos12')"
            style="display:none;">Ver menos ⮟</button>
        </div>
      </div>

      <!-- Postres -->
      <div class="swiper-slide" data-category="group5">
        <video id="slider" autoplay muted loop playsinline>
          <source src="postre1.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish13">
          <button id="add" data-dish-name="Cheesecake"
            onclick="toggleOrder(this, 'Cheesecake', '6.50€', 'postre1foto.png')">
            <i class="fa-solid fa-circle-plus"></i></button>
          <h3>Cheesecake</h3>
          <p>6.50€</p>
          <button id="verMas13" onclick="toggleAllergens('allergens13','verMas13','verMenos13')">Ver más</button>
          <div class="allergens" id="allergens13" style="display: none;">
            <p>Alergenos:</p>
            <p>Lactosa, huevo... etc</p>
          </div>
          <button id="verMenos13" onclick="toggleAllergens('allergens13','verMas13','verMenos13')"
            style="display:none;">
            Ver menos ⮟
          </button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group5">
        <video id="slider" autoplay muted loop playsinline>
          <source src="postre2.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish14">
          <button id="add" data-dish-name="Tarta de zanahoria"
            onclick="toggleOrder(this, 'Tarta de zanahoria', '6.50€', 'postre2foto.png')">
            <i class="fa-solid fa-circle-plus"></i></button>
          <h3>Tarta de zanahoria</h3>
          <p>6.50€</p>
          <button id="verMas14" onclick="toggleAllergens('allergens14','verMas14','verMenos14')">Ver más</button>
          <div class="allergens" id="allergens14" style="display: none;">
            <p>Alergenos:</p>
            <p>Zanahoria, huevo... etc</p>
          </div>
          <button id="verMenos14" onclick="toggleAllergens('allergens14','verMas14','verMenos14')"
            style="display:none;">
            Ver menos ⮟
          </button>
        </div>
      </div>

      <div class="swiper-slide" data-category="group5">
        <video id="slider" autoplay muted loop playsinline>
          <source src="postre3.mp4" type="video/mp4">
        </video>
        <div class="dish-info" id="dish15">
          <button id="add" data-dish-name="Tarta de manzana"
            onclick="toggleOrder(this, 'Tarta de manzana', '6.50€', 'postre3foto.png')">
            <i class="fa-solid fa-circle-plus"></i></button>
          <h3>Tarta de manzana</h3>
          <p>6.50€</p>
          <button id="verMas15" onclick="toggleAllergens('allergens15','verMas15','verMenos15')">Ver más</button>
          <div class="allergens" id="allergens15" style="display: none;">
            <p>Alergenos:</p>
            <p>Huevo... etc</p>
          </div>
          <button id="verMenos15" onclick="toggleAllergens('allergens15','verMas15','verMenos15')"
            style="display:none;">
            Ver menos ⮟
          </button>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>

    <div class="container">

      <button class="nav-arrow prev" id="btn-scroll-left" onclick="scrollList(-1)"><i
          class="fa-sharp fa-solid fa-arrow-left"></i></button>

      <div class="horizontal-scroll">

        <ul class="navigation">
          <li onclick="filterSlides('group1')"><img src="thumb1.png"></li>
          <li onclick="filterSlides('group2')"><img src="thumb2.png"></li>
          <li onclick="filterSlides('group3')"><img src="thumb3.png"></li>
          <li onclick="filterSlides('group4')"><img src="thumb4.png"></li>
          <li onclick="filterSlides('group5')"><img src="thumb5.png"></li>

        </ul>
      </div>

      <button class="nav-arrow next" id="btn-scroll-right" onclick="scrollList(1)"><i
          class="fa-sharp fa-solid fa-arrow-right"></i></button>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      const swiper = new Swiper('.swiper', {
        direction: 'vertical',
        speed: 200,
        slidesPerView: 1,
        spaceBetween: 0,
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },

      });

      function filterSlides(category) {
        const slides = document.querySelectorAll('.swiper-slide');
        slides.forEach(slide => {
          slide.classList.add('hidden');
        });

        const filteredSlides = document.querySelectorAll(`.swiper-slide[data-category="${category}"]`);
        filteredSlides.forEach(slide => {
          slide.classList.remove('hidden');
        });

        // Cambiar el título según el grupo
        const categoryTitle = document.getElementById('category-title');
        switch (category) {
          case 'group1':
            categoryTitle.textContent = 'Entrantes';
            break;
          case 'group2':
            categoryTitle.textContent = 'Pasta';
            break;
          case 'group3':
            categoryTitle.textContent = 'Pescado';
            break;
            case 'group4':
            categoryTitle.textContent = 'Carnes';
            break;
            case 'group5':
            categoryTitle.textContent = 'Postres';
            break;
          // Añade más casos para otros grupos
          default:
            categoryTitle.textContent = 'Categoría';
        }

        localStorage.setItem('lastCategory', category);
        swiper.update();

      }

      function saveCurrentSlide(category, slideIndex) {
        localStorage.setItem('lastCategory', category);
        localStorage.setItem('lastSlideIndex', slideIndex);
      }

      window.onload = () => {
        const swiperContainer = document.querySelector('.swiper');

        // Ocultar el Swiper completamente al cargar (opacidad 0)
        swiperContainer.style.opacity = '0';

        const lastCategory = localStorage.getItem('lastCategory') || 'group1';
        const lastSlideIndex = localStorage.getItem('lastSlideIndex') || 0;

        // Aplicar el filtro de categoría al cargar
        filterSlides(lastCategory);

        // Mover inmediatamente a la última diapositiva sin animación
        swiper.slideTo(lastSlideIndex, 0, false);

        // Mostrar el Swiper solo cuando haya cargado la diapositiva correcta
        setTimeout(() => {
          swiperContainer.style.opacity = '1'; // Hacerlo visible lentamente después de un breve retraso
        }, 100); // Este retraso asegura que el Swiper se cargue correctamente
      };


      swiper.on('slideChange', () => {
        const currentSlide = swiper.realIndex;
        const currentCategory = localStorage.getItem('lastCategory');
        saveCurrentSlide(currentCategory, currentSlide);
      });
    </script>


    <script>
      let scrollAmount = 0;
      const scrollStep = 120; // Ajusta este valor para que se desplace un elemento a la vez

      function scrollList(direction) {
        const list = document.querySelector('.navigation');
        const listWidth = list.scrollWidth;
        const containerWidth = document.querySelector('.horizontal-scroll').clientWidth;

        if (direction === 1) {
          // Desplazar hacia la derecha
          scrollAmount += scrollStep;
          if (scrollAmount > listWidth - containerWidth) {
            scrollAmount = listWidth - containerWidth; // No permite sobrepasar el final
          }
        } else {
          // Desplazar hacia la izquierda
          scrollAmount -= scrollStep;
          if (scrollAmount < 0) {
            scrollAmount = 0; // No permite sobrepasar el inicio
          }
        }

        list.style.transform = `translateX(-${scrollAmount}px)`;
      }

    </script>

    <script>
      // Función que revisa el carrito en localStorage y actualiza los íconos de los botones cuando la página se carga.
      document.addEventListener('DOMContentLoaded', () => {
        // Obtener el carrito de localStorage (o crear uno si no existe)
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Recorremos todos los botones "add" en la página
        document.querySelectorAll('button#add').forEach(button => {
          const dishName = button.getAttribute('data-dish-name'); // Usamos un atributo data para identificar el plato

          // Verificamos si el plato ya está en el carrito
          let dishInCart = cart.find(item => item.name === dishName);
          if (dishInCart) {
            // Si está en el carrito, mostramos el icono de check
            button.innerHTML = '<i class="fa-solid fa-check"></i>';
          } else {
            // Si no está en el carrito, mostramos el icono de agregar
            button.innerHTML = '<i class="fa-solid fa-circle-plus"></i>';
          }
        });
      });

      // Función para agregar platos al carrito usando localStorage
      function toggleOrder(button, dishName, description, imageUrl) { // no funciona decirle al chat
        const item = { name: dishName, description: description, imageUrl: imageUrl };

        // Obtener el carrito de localStorage (o crear uno si no existe)
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Buscar si el plato ya está en el carrito
        let dishIndex = cart.findIndex(item => item.name === dishName);

        if (dishIndex !== -1) {
          // Si ya está en el carrito, lo quitamos
          cart.splice(dishIndex, 1);
          button.innerHTML = '<i class="fa-solid fa-circle-plus"></i>';

        } else {
          // Si no está en el carrito, lo agregamos
          cart.push({ name: dishName, description: description, imageUrl: imageUrl, quantity: 1 });
          button.innerHTML = '<i class="fa-solid fa-check"></i>';

        }

        // Guardar de nuevo el carrito actualizado en localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

      }
    </script>


</body>

</html>